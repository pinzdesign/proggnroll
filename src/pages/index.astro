---
import Layout from '../layouts/Layout.astro';
import PageHeader from '../components/PageHeader.astro';
import Presentation from '../components/Presentation.astro';
import News from '../components/News.astro'
import Partners from '../components/Partners.astro';
import Contact from '../components/Contact.astro';
import Footer from '../components/Footer.astro';
import ReleaseListFront from '../components/ReleaseListFront.astro';
import Newsletter from '../components/Newsletter.astro';

const data = await fetch("https://kdeksxgxvcivtikjqluf.supabase.co/rest/v1/releases?limit=4", {
	method: "GET",
	headers: {
		apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtkZWtzeGd4dmNpdnRpa2pxbHVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDIyMDYzMTMsImV4cCI6MjAxNzc4MjMxM30.4YJVI0UCYSbR6QfEZ0S3S2gsvG1Ef8yViIHcyovLqgY"	
	}
}).then((res) => res.json());

console.log(data);
---

<Layout title="Progg'N'Roll Records - Welcome!">
	<PageHeader></PageHeader>
	<main>
		{
			data.map((release) => {
				return <ReleaseListFront data={release}/>
			})
		}
	</main>
	<Presentation></Presentation>
	<News></News>
	<Partners></Partners>
	<Contact></Contact>
	<Footer></Footer>
	<Newsletter></Newsletter>
</Layout>

<style>
main {
        width: 80%;
        margin: 30px auto;
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
    }
@media screen and (max-width: 980px) {
	main {
		grid-template-columns: 1fr 1fr;
	}
}
@media screen and (max-width: 420px) {
	main {
		grid-template-columns: 1fr;
	}
}
</style>