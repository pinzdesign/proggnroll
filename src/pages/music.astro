---
import Layout from "../layouts/Layout.astro";
import PageHeader from "../components/PageHeader.astro";
import ReleaseList from "../components/ReleaseList.astro";
import Partners from "../components/Partners.astro";
import Contact from "../components/Contact.astro";
import Footer from "../components/Footer.astro";

const data = await fetch("https://kdeksxgxvcivtikjqluf.supabase.co/rest/v1/releases", {
	method: "GET",
	headers: {
		apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtkZWtzeGd4dmNpdnRpa2pxbHVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDIyMDYzMTMsImV4cCI6MjAxNzc4MjMxM30.4YJVI0UCYSbR6QfEZ0S3S2gsvG1Ef8yViIHcyovLqgY"	
	}
}).then((res) => res.json());

console.log(data);
---

<Layout title="Progg'N'Roll Records - Music Releases!">
	<PageHeader></PageHeader>
    <main>
		{
			data.map((release) => {
				return <ReleaseList data={release}/>
			})
		}
	</main>
	<Partners></Partners>
	<Contact></Contact>
	<Footer></Footer>
</Layout>

<style>
    main {
        width: 80%;
        margin: 30px auto;
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
    }
	@media screen and (max-width: 980px) {
		main {
			grid-template-columns: 1fr 1fr;
		}
	}
	@media screen and (max-width: 420px) {
		main {
			grid-template-columns: 1fr;
		}
	}
</style>